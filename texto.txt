-- Criação do BD livros_off

create database livros_off;

-- codigo para usar o db
use livros_off;

-- criação da tabela CLIENTES

CREATE TABLE clientes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(50) NOT NULL,
    sobrenome VARCHAR(200) NOT NULL,
    data_de_nascimento DATE NOT NULL,
	sexo ENUM('m', 'f', 'ni'),
    telefone varchar(20),
    estado varchar(100) not null,
	cidade VARCHAR(100) NOT NULL,
    bairro VARCHAR(100) NOT NULL,
    rua VARCHAR(100) NOT NULL,
    numero varchar(100) not null,
    email VARCHAR(200) NOT NULL,
    senha VARCHAR(100)
);
ALTER TABLE clientes ADD COLUMN reset_password_token VARCHAR(255) NULL,
ADD COLUMN reset_password_expires DATETIME NULL;

/* EMAIL/SENHA de um usuário
{
"email": "gabriel.rochaphb@gmail.com", 
"senha":"Kevindvd21"
},
{
"email": "miguelphb@gmail.com", 
"senha":"Miguelphb1"
}
*/

-- criação da tabela autor

CREATE TABLE autor (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(255),
    nacionalidade VARCHAR(150),
    data_de_nascimento DATE
);


-- criação da tabela LIVROS

CREATE TABLE livros (
    id INT PRIMARY KEY AUTO_INCREMENT,
    titulo VARCHAR(100) NOT NULL,
    preco_venda DECIMAL(10 , 2 ) NOT NULL,
    subgenero VARCHAR(30),
    editora VARCHAR(50),
    id_autor INT,
    FOREIGN KEY (id_autor) REFERENCES autor (id)
);

-- criação da tabela ESTOQUE

create table estoque(
	id int primary key auto_increment,
    id_livro int,
    quantidade int,
    valor_do_livro decimal(10,2),
    disponivel boolean,
    foreign key(id_livro) references livros(id)
);


-- adição de dados na tabela livros

INSERT INTO livros (titulo, preco_venda, subgenero, editora, id_autor) values 
('harry potter e a ordem da fenix',69.90,'fantasia','Rocco',4),
('contos de horror da mimi',49.90,'horror','Darkside Books',3),
('jantar secreto',39.90,'suspense','Companhia das Letras',2),
('o alienista',39.90,'Realismo Crítico','Companhia de Letras',1),
('Harry Potter e a Pedra Filosofal',39.90,'fantasia','Rocco',4),
('Tomie vol.1', 49.90,'horror','Darkside Books',4);

-- Adição de dados na tabela Autor

INSERT INTO autor (nome, nacionalidade, data_de_nascimento) values 
('Machado de Assis', 'brasileiro',18390621),
('Raphael Montes','brasileiro', 19900922),
('Junji Ito','japonês',19630731),
('J. K. Rowling','britânica', 19650731);

-- Adição na tabela estoque

INSERT INTO estoque 
(id_livro, quantidade, valor_do_livro, disponivel) values 
(1,50,49.90,true),
(2,20,29.90,true),
(3,30,24.90,true),
(4,20,29.90 ,true),
(6, 30, 19.90,true),
(5, 50, 27.90,true);

-- criação da tabela carrinho

CREATE TABLE carrinho (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_cliente INT,
    id_livro INT,
    quantidade INT,
    forma_de_pagamento VARCHAR(20),
    valor_total DECIMAL(10 , 2 ),
    data_adicao DATE,
    FOREIGN KEY (id_cliente) REFERENCES clientes (id),
    FOREIGN KEY (id_livro) REFERENCES livros (id)
);

-- criação da tabela PEDIDOS

CREATE TABLE pedidos (
    id INT PRIMARY KEY AUTO_INCREMENT,
   
   
